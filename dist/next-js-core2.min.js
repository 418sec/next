!function(t,_){"function"==typeof define&&define.amd?define([],_):"object"==typeof exports?module.exports=_():t.nx=_()}(this,function(){var t=".",_="number",e=Array.prototype,s=Object.prototype.hasOwnProperty,i="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},o=i.nx||{GLOBAL:i,BREAKER:{},VERSION:"2.0.1",DEBUG:!1};return o.noop=function(){},o.error=function(t){throw new Error(t)},o["try"]=function(t){try{t()}catch(_){}},o.forEach=function(t,_,e){var s,i,n=t.length;for(s=0;s<n&&(i=_.call(e,t[s],s,t),i!==o.BREAKER);s++);},o.forIn=function(t,_,e){var i,n;for(i in t)if(s.call(t,i)&&(n=_.call(e,i,t[i],t),n===o.BREAKER))break},o.each=function(t,e,i){var n,r,a=function(_,s,n){return e.call(i,_,s,t,n)===o.BREAKER};if(t)if(r=t.length,typeof r===_)for(n=0;n<r&&!a(n,t[n],!0);n++);else for(n in t)if(s.call(t,n)&&a(n,t[n],!1))break},o.map=function(t,_,e){var s=[];return o.each(t,function(){var t=_.apply(e,arguments);return t===o.BREAKER?o.BREAKER:void s.push(t)}),s},o.mix=function(t){var _,e,s=t||{},i=arguments;for(_=1,e=i.length;_<e;_++)o.forIn(i[_],function(t,_){s[t]=_});return s},o.slice=function(t,_,s){return e.slice.call(t,_,s)},o.set=function(_,e,s){for(var i=e.split(t),n=_||o.GLOBAL,r=i.length-1,a=i[r],c=0;c<r;c++){var f=i[c],h=isNaN(+i[c+1])?{}:[];n=n[f]=n[f]||h}return n[a]=s,_},o.get=function(_,e){var s=e.split(t),i=_||o.GLOBAL;return s.forEach(function(t){i=i&&i[t]}),i},o.path=function(t,_,e){return null==e?this.get(t,_):this.set(t,_,e)},function(t){var _=function(){},e={__class_id__:0,__type__:"nx.RootClass",__base__:Object,__meta__:{},__static__:!1,__statics__:{},__properties__:{},__methods__:{},__method_init__:t.noop,__static_init__:t.noop},s={base:function(){var t,_=this.base.caller;if(_&&(t=_.__base__))return t.apply(this,arguments)},parent:function(_){var e="undefined"==typeof this.__id__,s=t.slice(arguments,1),i=e?this.__base__:this.__base__.prototype,o=this["@"+_].__type__,n=["get","set"][s.length];switch(o){case"method":return i[_].apply(this,s);case"property":return i["@"+_][n].apply(this,s)}}};e.__methods__=_.prototype=t.mix({constructor:_,init:t.noop,destroy:t.noop,toString:function(){return"[Class@"+this.__type__+"]"}},s),t.mix(e.__statics__,s),t.mix(_,e),t.mix(_,e.__statics__),t.RootClass=_}(o),function(t){var _="@",e="value",s=",";t.defineProperty=function(s,i,o,n){var r,a,c,f,h,p=_+i,u="object"==typeof o,l=o&&u?o:{value:o};return e in l?(f=l.value,h="_"+i,r=function(){return h in this?this[h]:"function"==typeof f?f.call(this):f},a=function(t){this[h]=t}):(r=o.get||s[p]&&s[p].get||t.noop,a=o.set||s[p]&&s[p].set||t.noop),p in s&&(r.__base__=s[p].get,a.__base__=s[p].set),c=s[p]={__meta__:o,__name__:i,__type__:"property",__static__:!!n,get:r,set:a,configurable:!0},Object.defineProperty(s,i,c),c},t.defineMethod=function(t,e,s,i){var o=_+e;return t[e]=s,t[o]={__meta__:s,__name__:e,__type__:"method",__static__:!!i}},t.defineBombMethod=function(_,e,i,o){var n=e.split(s);n.forEach(function(e,s){t.defineMethod(_,e,i.call(_,e,s),o)})},t.defineMembers=function(_,e,i,o){t.forIn(i,function(i,n){i.indexOf(s)>-1?t.defineBombMethod(e,i,n,o):t["define"+_](e,i,n,o)})}}(o),function(t){function _(_,e){this.type=_,this.meta=e,this.base=e["extends"]||t.RootClass,this.$base=this.base.prototype,this.__class_meta__={},this.__class__=null,this.__constructor__=null}var e=1,s=0,i="nx.Anonymous";_.prototype={constructor:_,initMetaProcessor:function(){var _=this.meta,s=_.methods||{},i=_.statics||{};t.mix(this.__class_meta__,{__type__:this.type,__meta__:_,__base__:this.base,__class_id__:e++,__method_init__:s.init||this.base.__method_init__,__static_init__:i.init||this.base.__static_init__,__static__:!_.methods&&!!_.statics})},createClassProcessor:function(){var t=this;this.__class__=function(){this.__id__=s++,t.__constructor__.apply(this,arguments),t.registerDebug(this)}},inheritProcessor:function(){var t=this.__class_meta__;this.inheritedClass(t),this.defineMethods(t,!0),this.defineMethods(t,!1),this.defineProperties(t)},inheritedClass:function(t){var _=function(){},e=this.__class__;_.prototype=this.$base,e.prototype=new _,e.prototype.$base=this.$base,e.prototype.constructor=e},defineMethods:function(_,e){var s=e?"statics":"methods",i="__"+s+"__",o=e?this.__class__:this.__class__.prototype,n=e?this.base:this.base.prototype,r=n[i]||{};t.forIn(this.meta[s],function(t,_){r[t]&&"function"==typeof _&&(_.__base__=r[t])}),o[i]=t.mix(_[i],r,this.meta[s]),t.defineMembers("Method",o,o[i],e)},defineProperties:function(_){var e=_.__static__,s=e?this.__class__:this.__class__.prototype;s.__properties__=t.mix(_.__properties__,this.meta.properties),t.defineMembers("Property",s,s.__properties__,e)},methodsConstructorProcessor:function(){var t=this.__class_meta__;this.__constructor__=function(){t.__method_init__.apply(this,arguments)}},staticsConstructorProcessor:function(){var t=this.__class_meta__;t.__static_init__.call(this.__class__)},registerProcessor:function(){var _=this.__class__,e=this.type,s=this.__class_meta__;t.mix(_.prototype,s),t.mix(_,s),e.indexOf(i)===-1&&t.set(t.GLOBAL,e,_)},registerDebug:function(_){t.DEBUG&&(t.set(t,"__instances__."+(s-1),_),t.set(t,"__instances__.length",s))}},t.declare=function(t,s){var o="string"==typeof t?t:i+e,n=s||t,r=new _(o,n);return r.initMetaProcessor(),r.createClassProcessor(),r.inheritProcessor(),r.methodsConstructorProcessor(),r.staticsConstructorProcessor(),r.registerProcessor(),r.__class__}}(o),o});